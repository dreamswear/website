<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion Annuaire - Dreamswear</title>
    <link rel="stylesheet" href="dashboard-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container" style="max-width: 1400px; margin: 40px auto; padding: 20px;">
        <header style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 20px;">
            <h1><i class="fas fa-address-book"></i> Gestion de l'Annuaire</h1>
            <div style="display: flex; gap: 10px;">
                <a href="dashboard-management.html" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i> Retour au Dashboard Management
                </a>
                <a href="annuaire-view.html" target="_blank" class="btn btn-outline">
                    <i class="fas fa-eye"></i> Voir Dashboard Annuaire
                </a>
                <button class="btn btn-primary" onclick="addProfessional()">
                    <i class="fas fa-plus"></i> Ajouter un professionnel
                </button>
            </div>
        </header>

        <div class="stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
            <div class="stat-card" style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); text-align: center;">
                <h3>Total professionnels</h3>
                <p class="stat-number" id="totalProfessionals" style="font-size: 2rem; font-weight: bold; color: #d4af37;">0</p>
            </div>
            <div class="stat-card" style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); text-align: center;">
                <h3>Photographes</h3>
                <p class="stat-number" id="photographersCount" style="font-size: 2rem; font-weight: bold; color: #2196F3;">0</p>
            </div>
            <div class="stat-card" style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); text-align: center;">
                <h3>Stylistes</h3>
                <p class="stat-number" id="stylistsCount" style="font-size: 2rem; font-weight: bold; color: #9C27B0;">0</p>
            </div>
            <div class="stat-card" style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); text-align: center;">
                <h3>Mannequins</h3>
                <p class="stat-number" id="modelsCount" style="font-size: 2rem; font-weight: bold; color: #4CAF50;">0</p>
            </div>
        </div>

        <div class="tabs" style="display: flex; border-bottom: 2px solid #eee; margin-bottom: 30px;">
            <button class="tab-btn active" onclick="switchTab('all')" data-tab="all">
                <i class="fas fa-th"></i> Tous les professionnels
            </button>
            <button class="tab-btn" onclick="switchTab('categories')" data-tab="categories">
                <i class="fas fa-folder"></i> Catégories
            </button>
            <button class="tab-btn" onclick="switchTab('pending')" data-tab="pending">
                <i class="fas fa-clock"></i> En attente
                <span id="pendingBadge" class="badge" style="display: none;">0</span>
            </button>
        </div>

        <!-- Onglet Professionnels -->
        <div id="allTab" class="tab-content" style="display: block;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px;">
                <h2>Professionnels de l'annuaire</h2>
                <div style="display: flex; gap: 10px;">
                    <input type="text" id="searchProfessional" placeholder="Rechercher nom, spécialité..." 
                           style="padding: 10px; border: 1px solid #ddd; border-radius: 5px; width: 250px;">
                    <select id="filterCategory" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        <option value="">Toutes catégories</option>
                        <!-- Catégories chargées dynamiquement -->
                    </select>
                    <select id="filterStatus" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        <option value="">Tous statuts</option>
                        <option value="active">Actif</option>
                        <option value="inactive">Inactif</option>
                        <option value="pending">En attente</option>
                    </select>
                </div>
            </div>

            <div id="professionalsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 25px;">
                <!-- Professionnels chargés dynamiquement -->
            </div>
        </div>

        <!-- Onglet Catégories -->
        <div id="categoriesTab" class="tab-content" style="display: none;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2>Catégories de l'annuaire</h2>
                <button class="btn btn-primary" onclick="addCategory()">
                    <i class="fas fa-plus"></i> Ajouter une catégorie
                </button>
            </div>

            <div id="categoriesList" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px;">
                <!-- Catégories chargées dynamiquement -->
            </div>
        </div>

        <!-- Onglet En attente -->
        <div id="pendingTab" class="tab-content" style="display: none;">
            <h2>Soumissions en attente</h2>
            <div id="pendingList">
                <!-- Soumissions en attente -->
            </div>
        </div>

        <!-- Modal professionnel -->
        <div id="professionalModal" class="modal" style="display: none;">
            <div style="background: white; padding: 30px; border-radius: 15px; width: 90%; max-width: 800px; max-height: 90vh; overflow-y: auto;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                    <h2 id="modalTitle">Ajouter un professionnel</h2>
                    <button onclick="closeModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
                </div>
                <form id="professionalForm" onsubmit="saveProfessional(event)">
                    <input type="hidden" id="professionalId">
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <label>Nom / Entreprise *</label>
                            <input type="text" id="name" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        </div>
                        <div>
                            <label>Catégorie *</label>
                            <select id="category_id" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                <!-- Catégories chargées dynamiquement -->
                            </select>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <label>Spécialité *</label>
                            <input type="text" id="specialty" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;" placeholder="Ex: Photographie de mode">
                        </div>
                        <div>
                            <label>Note (1-5)</label>
                            <input type="number" id="rating" min="1" max="5" step="0.1" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label>Description *</label>
                        <textarea id="description" rows="4" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;"></textarea>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <label>Contact (email ou site web) *</label>
                            <input type="text" id="contact_info" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        </div>
                        <div>
                            <label>Localisation</label>
                            <input type="text" id="location" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <label>Site web</label>
                            <input type="url" id="website" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        </div>
                        <div>
                            <label>Instagram</label>
                            <input type="text" id="instagram" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;" placeholder="@username">
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
                        <div>
                            <label>Statut</label>
                            <select id="status" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                <option value="active">Actif</option>
                                <option value="inactive">Inactif</option>
                                <option value="pending">En attente</option>
                            </select>
                        </div>
                        <div>
                            <label>Type</label>
                            <select id="type" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                <option value="professional">Professionnel</option>
                                <option value="partner">Partenaire</option>
                                <option value="recommended">Recommandé</option>
                            </select>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 15px; justify-content: flex-end;">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">Annuler</button>
                        <button type="submit" class="btn btn-primary">Enregistrer</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Modal catégorie -->
        <div id="categoryModal" class="modal" style="display: none;">
            <div style="background: white; padding: 30px; border-radius: 15px; width: 90%; max-width: 600px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                    <h2 id="categoryModalTitle">Ajouter une catégorie</h2>
                    <button onclick="closeCategoryModal()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">&times;</button>
                </div>
                <form id="categoryForm" onsubmit="saveCategory(event)">
                    <input type="hidden" id="categoryId">
                    
                    <div style="margin-bottom: 20px;">
                        <label>Nom de la catégorie *</label>
                        <input type="text" id="categoryName" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label>Description</label>
                        <textarea id="categoryDescription" rows="3" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;"></textarea>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label>Icône (classe FontAwesome)</label>
                        <input type="text" id="categoryIcon" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;" placeholder="fas fa-camera">
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label>Couleur de l'icône</label>
                        <input type="color" id="categoryColor" value="#2196F3" style="width: 100%; height: 40px;">
                    </div>
                    
                    <div style="display: flex; gap: 15px; justify-content: flex-end;">
                        <button type="button" class="btn btn-secondary" onclick="closeCategoryModal()">Annuler</button>
                        <button type="submit" class="btn btn-primary">Enregistrer</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
<script src="dashboard-management.js"></script>
</body>
</html>
